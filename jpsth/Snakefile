rule trials_dict:
	input:
	output:
		"binary/trials_dict.mat"
	shell:
		'matlab -noFigureWindows -batch "behav.get_trials_dict()"'

rule delay_vs_iti_covered_per_sec:
	input:
		"binary/delay_iti_runlength_covered.mat",
		"binary/trials_dict.mat"
	output:
		"binary/delay_vs_iti_per_sec.fig",
		"binary/motif_cover_per_sec.mat"
	shell:
		'matlab -noFigureWindows -batch "wave.replay.delay_vs_iti_per_sec()"'

rule delay_vs_iti_runlength_covered:
	input:
		"binary/rings_tag_trl.mat",
		"binary/chain_tag_all_trl.mat",
		"binary/trials_dict.mat"
	output:
		"binary/delay_iti_runlength_covered.mat"
	shell:
		'matlab -noFigureWindows -batch "wave.replay.delay_vs_iti()"'

rule rings_tag_trl:
	input:
		"binary/sums_ring_stats_all.mat",
		"binary/su_meta.mat",
		"binary/wrs_mux_meta.mat"
	output:
		"binary/rings_tag_trl.mat"
	shell:
		'matlab -noFigureWindows -batch "bz.rings.rings_time_constant.stats(load_file=false,skip_save=false,compress=true)"'
		
rule wrs_mux_meta:
	output:
		"binary/wrs_mux_meta.mat"
	shell:
		'matlab -noFigureWindows -batch "ephys.get_wrs_mux_meta(savefile=true,loadfile=false)"'

		
rule su_meta:
	output:
		"binary/su_meta.mat"
	shell:
		'matlab -noFigureWindows -batch "ephys.util.load_meta(save_file=true,adjust_white_matter=true)"'


